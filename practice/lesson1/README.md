# Введение в JavaScript

## Использование кода на JavaScript

Программы на языке JavaScript можно вставить в любое место HTML-документа при помощи тега `<script>`:

```html
<script>
  alert('Привет, мир!');
</script>
```

Если JavaScript-кода много – его выносят в отдельный файл, который подключается в HTML:

```html
<script src="/path/to/script.js"></script>
```

Как правило, в HTML пишут только самые простые скрипты, а сложные выносят в отдельный файл.

Браузер скачает его только первый раз и в дальнейшем, при правильной настройке сервера, будет брать из своего кеша.

Благодаря этому один и тот же большой скрипт, содержащий, к примеру, библиотеку функций, может использоваться на разных страницах без полной перезагрузки с сервера.

В одном теге `<script>` нельзя одновременно подключить внешний скрипт и указать код.

Вот так не сработает:

```html
<script src="/path/to/script.js">
  alert('Привет, мир!');
</script>
```

Ссылки:

- [Документация по тегу `<script>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script)
- [Документация по функции `alert()`](https://developer.mozilla.org/ru/docs/Web/API/Window/alert)

## Структура кода

Код JavaScript состоит из команд, разделённых точкой с запятой:

```js
alert('Первое сообщение');
alert('Второе сообщение');
```

Однострочные комментарии:

```js
// Это однострочный комментарий.
alert('Привет, мир!');
```

Многострочные комментарии:

```js
/* Это
многострочный
комментарий. */
alert('Привет, мир!');
```

## Переменные и константы

Переменная состоит из имени и выделенной области памяти, которая ему соответствует. Для объявления или, другими словами, создания переменной используется ключевое слово `var`:

```js
// Объявим переменную message.
var message;

// Сохраним в переменной строку.
message = 'Текст сообщения';

// Теперь можно обращаться к переменной по имени.
alert(message);

// Значение переменной в любой момент можно изменить.
message = 25;
```

Объявление переменной и её инициализацию можно совместить:

```js
var message = 'Текст сообщения';
```

Можно даже объявить несколько переменных сразу:

```js
var user = 'Вася', age = 25, message = 'Текст сообщения';
```

Использование ключевого слова `const` задаёт константу, то есть переменную, которую нельзя менять:

```js
const PI = 3.1415;
```

Ещё один способ объявить переменную - ключевое слово `let`:
```js
let message = 'Текст сообщения';
```

Основное отличие `let` от `var`: область видимости переменной `let` – блок `{...}`, тогда как переменная `var` видна везде в функции.

Пример с `var`:

```js
var number1 = 5;

if (true) {
  var number1 = 10;

  alert(number1); // 10 (внутри блока)
}

alert(number1); // 10 (снаружи блока то же самое)
```

Пример с `let`:

```js
let number2 = 5;

if (true) {
  let number2 = 10;

  alert(number2); // 10 (внутри блока)
}

alert(number2); // 5 (снаружи блока осталось старое значение)
```

## Типы данных

Тип `число` (`number`) используется как для целых, так и для дробных чисел. Существуют специальные числовые значения `Infinity` (бесконечность) и `NaN` (ошибка вычислений).

```js
var n = 123; // Целое число.
n = 12.345; // Дробное число.

n = Infinity; // Бесконечность.
n = 1 / 0; // Infinity, получается при делении на ноль.

n = NaN; // Ошибка вычислений.
n = 'строка' * 2; // NaN, получается при некорректной математической операции.
```

Тип `строка` (`string`). Для создания строки можно использовать как одинарные кавычки, так и двойные.

```js
var str = 'Для создания строки используем одинарные кавычки';
str = "Двойные кавычки тоже подойдут";
```

Тип `логический` (`boolean`). Имеет два значения: `true` (истина) и `false` (ложь).

Специальное значение `null`. Значение `null` не относится ни к одному из типов выше, а образует свой отдельный тип, состоящий из единственного значения `null`. Имеет смысл "ничего" или "значение неизвестно".

```js
// Значение неизвестно.
var age = null;
```

Специальное значение `undefined`. Значение `undefined`, как и `null`, образует свой собственный тип, состоящий из одного этого значения. Оно имеет смысл "значение не присвоено". Если переменная объявлена, но в неё ничего не записано, то её значение как раз и есть `undefined`.

```js
// Значение не присвоено.
var x;
alert(x); // выведет "undefined"
```

Тип `объект` (`object`). Он используется для коллекций данных и для объявления более сложных сущностей.

```js
var user = {
  name: "Вася",
  age: 25
};
```

Для определение типа переменной существует оператор `typeof`. Результатом `typeof` является строка, содержащая тип.

```js
typeof undefined; // "undefined"

typeof 0; // "number"

typeof true; // "boolean"

typeof "foo"; // "string"

typeof {}; // "object"

typeof null; // "object"  (1)

typeof function(){}; // "function"  (2)
```

Последние две строки помечены, потому что typeof ведет себя в них по-особому.

1. Результат `typeof null == "object"` – это официально признанная ошибка в языке, которая сохраняется для совместимости. На самом деле `null` – это не объект, а отдельный тип данных.

2. Функции мы пройдём чуть позже. Пока лишь заметим, что функции не являются отдельным базовым типом в JavaScript, а подвидом объектов. Но `typeof` выделяет функции отдельно, возвращая для них `"function"`. На практике это весьма удобно, так как позволяет легко определить функцию.

## Операторы

Бинарный и унарный минус (`-`):

```js
var x = 1;
x = -x;
alert( x ); // -1, применили унарный минус

var x = 1, y = 3;
alert( y - x ); // 2, бинарный минус

// Аргументы приводятся к числу.
alert( 2 - '1' ); // 1
alert( 6 / '2' ); // 3
```

Бинарный и унарный плюс (`+`):

```js
// Сложение чисел.
var x = 1, y = 3;
alert( y + x ); // 4, бинарный плюс

// Объединение строк.
var a = "моя" + "строка";
alert( a ); // моястрока

// Если хотя бы один аргумент является строкой, то второй будет также преобразован к строке.
alert( '1' + 2 ); // "12"
alert( 2 + '1' ); // "21"

// Унарный плюс ничего не делает с числами
alert( +1 ); // 1
alert( +(1 - 2) ); // -1

var apples = "2";
var oranges = "3";
alert( apples + oranges ); // "23", так как бинарный плюс складывает строки
alert( +apples + +oranges ); // 5, число, оба операнда предварительно преобразованы в числа
```

В том случае, если в выражении есть несколько операторов – порядок их выполнения определяется приоритетом: [таблица приоритетов](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Operator_Precedence).

Оператор присваивания (`=`):

```js
// У оператора присваивания низкий приоритет.
var x = 2 * 2 + 1;
alert( x ); // 5

// Присваивание по цепочке.
var a, b, c;
a = b = c = 2 + 2;
alert( a ); // 4
alert( b ); // 4
alert( c ); // 4

// Присваивание возвращает значение.
var a = 1;
var b = 2;
var c = 3 - (a = b + 1);
alert( a ); // 3
alert( c ); // 0
```

Оператор взятия остатка (`%`):

```js
alert( 5 % 2 ); // 1, остаток от деления 5 на 2
alert( 8 % 3 ); // 2, остаток от деления 8 на 3
alert( 6 % 3 ); // 0, остаток от деления 6 на 3
```

Операторы инкремента (`++`) и декремента (`--`):

```js
// Инкремент увеличивает на 1.
var i = 2;
i++;      // более короткая запись для i = i + 1.
alert(i); // 3

// Декремента уменьшает на 1.
var i = 2;
i--;      // более короткая запись для i = i - 1.
alert(i); // 1

// Префиксная форма возвращает увеличенное значение.
var i = 1;
var a = ++i;
alert(a); // 2

// Постфиксная форма вернёт старое значение до увеличения.
var i = 1;
var a = i++;
alert(a); // 1
```

Побитовые операторы:

- `&` - И (AND)
- `|` - ИЛИ (OR)
- `^` - Исключающее ИЛИ (XOR)
- `<<` - Левый сдвиг (LEFT SHIFT)
- `>>` - Правый сдвиг (RIGHT SHIFT)
- `>>>` - Правый сдвиг с заполнением нулями (ZERO-FILL RIGHT SHIFT)

Сокращённая арифметика с присваиванием:

```js
var n = 2;
n = n + 5; // теперь n=7
n = n * 2; // теперь n=14
alert( n ); // 14

var n = 2;
n += 5; // теперь n=7 (работает как n = n + 5)
n *= 2; // теперь n=14 (работает как n = n * 2)
alert( n ); // 14

// Имеет такой же приоритет, как и обычное присваивание.
var n = 2;
n *= 3 + 5;
alert( n ); // 16  (n = 2 * 8)
```

Оператор запятая (`,`):

```js
// Скобки нужны, т.к. приоритет ниже присваивания.
var a = (5, 6);
alert(a); // 6

// три операции в одной строке
for (a = 1, b = 3, c = a*b; a < 10; a++) {}
```

# Самостоятельная работа

## Задание №1: "Работа с JavaScript"

Задание:

1. Создайте файл `index.html` со следующим содержимым:

```html
<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
</head>

<body>
  <script src='main.js'></script>
</body>

</html>
```

2. Создайте файл `main.js` со следующим содержимым:

```js
alert('Привет, мир!');
```

3. Откройте файл `index.html` и убедитесь, что на экран было выведено сообщение `Привет, мир!`.

## Задание №2: "Работа с переменными"

Задание:

1. Объявите две переменные: `admin` и `name`.
2. Запишите в `name` строку `'Василий'`.
3. Скопируйте значение из `name` в `admin`.
4. С помощью функции `alert` выведите значение переменной admin (должно вывести `Василий`).

<details>
<summary>Решение</summary>

```js
var admin, name; // две переменных через запятую

name = "Василий";

admin = name;

alert(admin); // "Василий"
```

</details>

## Задание №3: "Порядок срабатывания инкремента"

Посмотрите, понятно ли вам, почему код ниже работает именно так?

```js
var a = 1, b = 1, c, d;

c = ++a; alert(c); // 2
d = b++; alert(d); // 1

c = (2+ ++a); alert(c); // 5
d = (2+ b++); alert(d); // 4

alert(a); // 3
alert(b); // 3
```

<details>
<summary>Решение</summary>

```js
var a = 1, b = 1, c, d;

// префиксная форма сначала увеличивает a до 2, а потом возвращает
c = ++a; alert(c); // 2

// постфиксная форма увеличивает, но возвращает старое значение
d = b++; alert(d); // 1

// сначала увеличили a до 3, потом использовали в арифметике
c = (2+ ++a); alert(c); // 5

// увеличили b до 3, но в этом выражении оставили старое значение
d = (2+ b++); alert(d); // 4

// каждую переменную увеличили по 2 раза
alert(a); // 3
alert(b); // 3
```

</details>

## Задание №4: "Результат присваивания"

Чему будет равен `x` в примере ниже?

```js
var a = 2;
var x = 1 + (a *= 2);
```

<details>
<summary>Решение</summary>

Ответ: `x = 5`.

Оператор присваивания возвращает значение, которое будет записано в переменную, например:

```js
var a = 2;
alert( a *= 2 ); // 4
```

Отсюда `x = 1 + 4 = 5`.

</details>