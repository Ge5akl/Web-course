[Назад к описанию курса](../../README.md)

# Введение в JavaScript

## Подключение скриптов

Скрипты можно вставить в любое место страницы при помощи элемента `<script>`. Скрипт помещается между открывающим и закрывающим тегом элемента `<script>`:

```html
<script>
  alert('Привет, мир!');
</script>
```

Действия браузера:
1. начинает разбор страницы, отображает часть до `<script>`,
2. исполняет содержимое `<script>`,
3. продолжает разбор страницы, отображает оставшуюся часть.

В примере используется встроенная функция `alert(message)`, выводящая на экран модальное окно с сообщением `message` и приостанавливающая выполнение скрипта, пока пользователь не нажмёт кнопку `ОК`.

Как и стили, скрипты можно выносить в отдельные файлы. Это позволяет разгрузить страницу и задействовать кеш браузера для скриптов. Для указания ссылки на внешний файл скрипта используется атрибут `src` элемента `<script>`.

```html
<script src="/path/to/script.js"></script>
```

В элементе `<script>` нельзя одновременно и подключить внешний скрипт, и указать локальный скрипт. В этом случае содержимое элемента `<script>` будет игнорироваться:

```html
<script src='/path/to/script.js'>
  // Этот код не выполнится!
  alert('Привет, мир!');
</script>
```

При использовании внешних скриптов можно можно изменить их способ загрузки и исполнения при помощи дополнительных атрибутов элемента `<script>`:

Атрибут | Описание
--------|---------
нет     | Обработка страницы прекращается на время загрузки и выполнения скрипта.
`async` | Загрузка скрипта производится асинхронно, выполнение скрипта происходит сразу после загрузки.
`defer` | Загрузка скрипта производится асинхронно, выполнение скрипта происходит после обработки страницы.

При указании и `async`, и `defer` в одном элементе `<script>` эффект будет иметь только атрибут `async`.

При использовании атрибута `async` первым сработает скрипт, который раньше загрузится:

```html
<script async src="first.js"></script>
<script async src="second.js"></script>
```

При использовании атрибута `defer` относительный порядок скриптов сохраняется:

```html
<script defer src="first.js"></script>
<script defer src="second.js"></script>
```

### Ссылки

- [Элемент `<script>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script)
- [Встроенная функция `alert()`](https://developer.mozilla.org/ru/docs/Web/API/Window/alert)

### Задачи

#### Первые шаги

Задание:
1. создать страницу `index.html`, которая с помощью функции `alert()` выводит на экран сообщение `Я изучаю JavaScript!`,
2. открыть страницу в браузере и убедиться, что всё работает.

<details>
<summary>Посмотреть решение</summary>
<hr>

Содержимое `index.html`:

```html
<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
</head>

<body>
  <script>
    alert('Я изучаю JavaScript!');
  </script>
</body>

</html>
```

<hr>
</details>

#### Внешний скрипт

Задание:
1. взять решение предыдущей задачи и вынесите JS во внешний файл `alert.js`,
2. открыть страницу в браузере и убедиться, что всё работает.

<details>
<summary>Посмотреть решение</summary>
<hr>

Содержимое `index.html`:

```html
<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
</head>

<body>
  <script src='alert.js'></script>
</body>

</html>
```

Содержимое `alert.js`:

```js
alert('Я изучаю JavaScript!');
```

<hr>
</details>

#### Асинхронная загрузка скриптов

Задание:
1. создать скрипт `main.js` со следующим содержимым:

```js
var start = new Date().getTime();
var end;

// Цикл с длительностью в 1 секунду.
while ((end = new Date().getTime() - start) < 1000);

// Создать параграф с указанием времени загрузки скрипта.
var message = document.createElement('p');
message.style.color = 'green';
message.innerText = 'Скрипт выполнился за ' + end / 1000 + ' с';

// Добавить параграф на страницу.
document.body.appendChild(message);
```

2. создать страницу `index.html` попеременно вставлять в неё следующие блоки HTML:

    - без использования `async` и `defer`:

    ```html
    <p>Начало страницы</p>
    <script src='https://js.cx/hello/ads.js?speed=0'></script>
    <script src='main.js'></script>
    <p>Конец страницы</p>
    ```

    - с использованием `async`:

    ```html
    <p>Начало страницы</p>
    <script async src='https://js.cx/hello/ads.js?speed=0'></script>
    <script async src='main.js'></script>
    <p>Конец страницы</p>
    ```

    - с использованием `defer`:

    ```html
    <p>Начало страницы</p>
    <script defer src='https://js.cx/hello/ads.js?speed=0'></script>
    <script defer src='main.js'></script>
    <p>Конец страницы</p>
    ```

3. открыть страницу в браузере с каждым из блоков HTML и узнать, какой из скриптов выполняется первым.

<details>
<summary>Посмотреть решение</summary>
<hr>

В случае без использования `async` и `defer` первым выполнится `ads.js`, так как он объявлен на странице раньше, чем `main.js`.

В случае с использованием `async` первым выполнится `main.js`, так как скорость его загрузки выше, чем у `ads.js`.

В случае с использованием `defer` первым выполнится `ads.js`, так как в этом случае будет сохраняться относительный порядок скриптов на странице.

<hr>
</details>

## Структура кода и переменные

Скрипты состоят из команд, разделённых точкой с запятой:

```js
alert('Первое сообщение');
alert('Второе сообщение');
```

Однострочные комментарии:

```js
// Это однострочный комментарий.
alert('Сообщение');
```

Многострочные комментарии:

```js
/* Это
многострочный
комментарий. */
alert('Сообщение');
```

Для объявления переменной используется ключевое слово `var`:

```js
var message;
message = 'Сообщение';
alert(message); // Сообщение

var num = 10, checked = true;
alert(num); // 10
alert(checked); // true

num = checked;
alert(num); // true
```

В любой момент значение (и тип) переменной можно изменить:

```js
var my_var = 10;   // числовой тип
my_var = 'строка'; // строковый тип
my_var = true;     // логический тип
```

Существует ещё один способ объявления переменной - ключевое слово `let`:

```js
var message = 'Сообщение';
```

В отличие `var`, переменная `let` видна только в рамках блока, в котором объявлена:

```js
var num1 = 5; // 5
let num2 = 5; // 5

if (true) {
  var num1 = 10; // Та же самая переменная, что и снаружи блока.
  let num2 = 10; // Новая переменная.

  alert(num1); // 10
  alert(num2); // 10
}

alert(num1); // 10
alert(num2); // 5
```

Также в JS можно объявить константу. Для этого используется ключевое слово `const`:

```js
// Число π.
const M_PI = 3.1415;
```

### Ссылки

- [Ключевое слово `var`](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Statements/var)
- [Ключевое слово `let`](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Statements/let)
- [Ключевое слово `const`](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Statements/const)

### Задачи

#### Работа с переменными

Создать скрипт `main.js`, в котором:
1. объявить переменные `first_user` и `second_user`,
2. записать строку `'Василий'` в `first_user`,
3. записать строку `'Иван'` в `second_user`,
4. с помощью функции `alert` вывести значение переменной `first_user` (должно вывести `Василий`),
5. скопировать значение из `second_user` в `first_user`,
6. с помощью функции `alert` вывести значение переменной `first_user` (должно вывести `Иван`),
7. запустить скрипт и убедиться, что всё работает.

<details>
<summary>Посмотреть решение</summary>
<hr>

Содержимое `main.js`:

```js
var first_user = 'Василий', second_user = 'Иван';
alert(first_user); // Василий

first_user = second_user;
alert(first_user); // Иван
```

<hr>
</details>

## Взаимодействие с пользователем

Помимо уже знакомой нам встроенной функции `alert()`, существуют также функции `prompt()` и `confirm()`, обеспечивающие базовое взаимодействие с пользователем.

Функция `alert(message)` выводит на экран модальное окно с сообщением `message` и приостанавливает выполнение скрипта, пока пользователь не нажмёт `ОК`.

```js
alert( "Привет" );
```

Функция `prompt(title, default)` выводит на экран модальное окно с заголовком `message`, полем для ввода текста, заполненным строкой по умолчанию `default` и кнопками `OK` и `CANCEL`. Функция возвращает то, что ввёл посетитель – строку или специальное значение `null`, если ввод отменён.

```js
var years = prompt('Сколько вам лет?', 100);
alert('Вам ' + years + ' лет!');
```

Функция `confirm(question)` выводит окно с вопросом `question` и кнопками `OK` и `CANCEL`. Результатом будет `true` при нажатии `OK` и `false` – при `CANCEL`.

```js
var isAdmin = confirm("Вы - администратор?");
alert( isAdmin );
```

### Ссылки

- [Встроенная функция `prompt()`](https://developer.mozilla.org/ru/docs/Web/API/Window/prompt)
- [Встроенная функция `confirm()`](https://developer.mozilla.org/ru/docs/Web/API/Window/confirm)

### Задачи

#### Взаимодействие с пользователем

Создать скрипт `main.js`, в котором:
1. запросить имя пользователя с помощью функции `propmt()`,
2. вывести результат с помощью функции `alert()`,
3. с помощью функции `confirm()` узнать, является ли пользователь совершеннолетним,
4. вывести результат с помощью функции `alert()`,
5. запустить скрипт и убедиться, что всё работает.

<details>
<summary>Посмотреть решение</summary>
<hr>

Содержимое `main.js`:

```js
// Получение имени пользователя.
var user_name = prompt('Ваше имя?', '');
alert(user_name);

var is_adult = confirm('Вы совершеннолетний?');
alert(is_adult);
```

<hr>
</details>

## Операторы

### Операторы присваивания

Запись        | Сокращённая запись | Приоритет   | Описание
--------------|--------------------|-------------|---------
`x = y`       | `x = y`            | `3`         | Присваивание.
`x = x + y`   | `x += y`           | `3`         | Присваивание со сложением.
`x = x - y`   | `x -= y`           | `3`         | Присваивание с вычитанием.
`x = x * y`   | `x *= y`           | `3`         | Присваивание с умножением.
`x = x / y`   | `x /= y`           | `3`         | Присваивание с делением.
`x = x % y`   | `x %= y`           | `3`         | Присваивание с делением по модулю.
`x = x << y`  | `x <<= y`          | `3`         | Присваивание с левым сдвигом.
`x = x >> y`  | `x >>= y`          | `3`         | Присваивание с правым сдвигом.
`x = x >>> y` | `x >>>= y`         | `3`         | Присваивание с правым беззнаковым сдвигом.
`x = x & y`   | `x &= y`           | `3`         | Присваивание с побитовым И.
`x = x | y`   | `x |= y`           | `3`         | Присваивание с побитовым ИЛИ.
`x = x ^ y`   | `x ^= y`           | `3`         | Присваивание с побитовым исключающим ИЛИ.


### Ссылки

- [Выражения и операторы](https://developer.mozilla.org/ru/docs/Web/JavaScript/Guide/Expressions_and_Operators)
- [Приоритет операторов](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)
- [Операторы присваивания](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Assignment_Operators)
- [Операторы сравнения](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Операторы_сравнения)
- [Арифметические операции](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators)
- [Битовые операции](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators)
- [Логические операторы](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Логические_операторы)
- [Оператор запятая](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Оператор_Запятая)


























Бинарный и унарный минус (`-`):

```js
var x = 1;
x = -x;
alert( x ); // -1, применили унарный минус

var x = 1, y = 3;
alert( y - x ); // 2, бинарный минус

// Аргументы приводятся к числу.
alert( 2 - '1' ); // 1
alert( 6 / '2' ); // 3
```

Бинарный и унарный плюс (`+`):

```js
// Сложение чисел.
var x = 1, y = 3;
alert( y + x ); // 4, бинарный плюс

// Объединение строк.
var a = "моя" + "строка";
alert( a ); // моястрока

// Если хотя бы один аргумент является строкой, то второй будет также преобразован к строке.
alert( '1' + 2 ); // "12"
alert( 2 + '1' ); // "21"

// Унарный плюс ничего не делает с числами
alert( +1 ); // 1
alert( +(1 - 2) ); // -1

var apples = "2";
var oranges = "3";
alert( apples + oranges ); // "23", так как бинарный плюс складывает строки
alert( +apples + +oranges ); // 5, число, оба операнда предварительно преобразованы в числа
```

Оператор присваивания (`=`):

```js
// У оператора присваивания низкий приоритет.
var x = 2 * 2 + 1;
alert( x ); // 5

// Присваивание по цепочке.
var a, b, c;
a = b = c = 2 + 2;
alert( a ); // 4
alert( b ); // 4
alert( c ); // 4

// Присваивание возвращает значение.
var a = 1;
var b = 2;
var c = 3 - (a = b + 1);
alert( a ); // 3
alert( c ); // 0
```

Оператор взятия остатка (`%`):

```js
alert( 5 % 2 ); // 1, остаток от деления 5 на 2
alert( 8 % 3 ); // 2, остаток от деления 8 на 3
alert( 6 % 3 ); // 0, остаток от деления 6 на 3
```

Операторы инкремента (`++`) и декремента (`--`):

```js
// Инкремент увеличивает на 1.
var i = 2;
i++;      // более короткая запись для i = i + 1.
alert(i); // 3

// Декремента уменьшает на 1.
var i = 2;
i--;      // более короткая запись для i = i - 1.
alert(i); // 1

// Префиксная форма возвращает увеличенное значение.
var i = 1;
var a = ++i;
alert(a); // 2

// Постфиксная форма вернёт старое значение до увеличения.
var i = 1;
var a = i++;
alert(a); // 1
```

Сокращённая арифметика с присваиванием:

```js
var n = 2;
n = n + 5; // теперь n=7
n = n * 2; // теперь n=14
alert( n ); // 14

var n = 2;
n += 5; // теперь n=7 (работает как n = n + 5)
n *= 2; // теперь n=14 (работает как n = n * 2)
alert( n ); // 14

// Имеет такой же приоритет, как и обычное присваивание.
var n = 2;
n *= 3 + 5;
alert( n ); // 16  (n = 2 * 8)
```

Оператор запятая (`,`):

```js
// Скобки нужны, т.к. приоритет ниже присваивания.
var a = (5, 6);
alert(a); // 6

// три операции в одной строке
for (a = 1, b = 3, c = a*b; a < 10; a++) {}
```

## Операторы сравнения

Список операторов:

- Больше/меньше: `a > b`, `a < b`.
- Больше/меньше или равно: `a >= b`, `a <= b`.
- Равно: `a == b`.
- Не равно: `a != b`.
- Строгое равенство: `a === b`.
- Строгое неравенство: `a !== b`.

Результат логической операции - логическое значение `true` или `false`.

```js
alert( 2 > 1 ); // true, верно
alert( 2 == 1 ); // false, неверно
alert( 2 != 1 ); // true

var a = true; // присваивать явно
var b = 3 > 4; // или как результат сравнения
alert( b ); // false
alert( a == b ); // (true == false) неверно, выведет false
```

Строки сравниваются побуквенно:

```js
// В JavaScript используется кодировка Unicode.
alert( 'Б' > 'А' ); // true
alert( 'а' > 'Я' ); // true, строчные буквы больше прописных

alert( 'Банан' > 'Аят' ); // true, т.к. 'Б' > 'А'
alert( 'Вася' > 'Ваня' ); // true, т.к. 'с' > 'н'
alert( 'Привет' > 'Прив' ); // true, так как 'е' больше чем "ничего".
```

Сравнение разных типов:

```js
alert( '2' > 1 ); // true, сравнивается как 2 > 1
alert( '01' == 1 ); // true, сравнивается как 1 == 1
alert( false == 0 ); // true, false становится числом 0
alert( true == 1 ); // true, так как true становится числом 1
```

Операторы строгого равенства (`===`) и неравенства (`!==`):

```js
// Простым равенством невозможно отличить, т.к. операнды разных типов преобразовываются к числу.
// Пустая строка, как и false, при преобразовании к числу дают 0.
alert( 0 == false ); // true
alert( '' == false ); // true

// В этом случае используем строгое равенство.
alert( 0 === false ); // false, т.к. типы различны
alert( '' === false ); // false, т.к. типы различны
```

Особенности сравнения с `null`:

```js
// Это особенность JavaScript, надо запомнить.
alert( null > 0 ); // false
alert( null == 0 ); // false
alert( null >= 0 ); // true
alert( null === null ); // true
```

Особенности сравнения с `undefined`:

```js
// Это особенность JavaScript, надо запомнить.
alert( undefined > 0 ); // false
alert( undefined < 0 ); // false
alert( undefined == 0 ); // false
alert( undefined === undefined ); // true
```

## Побитовые операции

Побитовые операторы интерпретируют операнды как последовательность из 32 битов (нулей и единиц). Они производят операции, используя двоичное представление числа, и возвращают новую последовательность из 32 бит (число) в качестве результата.

Примеры представления чисел в двоичной системе:

```js
// Положительные числа - прямой код.
var a;
a = 0;   // 00000000000000000000000000000000
a = 1;   // 00000000000000000000000000000001
a = 2;   // 00000000000000000000000000000010
a = 3;   // 00000000000000000000000000000011
a = 255; // 00000000000000000000000011111111
a = 314; // 00000000000000000000000100111010

// Отрицательные числа - код с дополнением до двойки.
a = -314; // 11111111111111111111111011000110
```

Список операторов:

Оператор                          | Использование | Описание
----------------------------------|---------------|---------
Побитовое И (AND)                 | `a & b`       | Ставит `1` на бит результата, для которого соответствующие биты операндов равны `1`.
Побитовое ИЛИ (OR)                | `a | b`       | Ставит `1` на бит результата, для которого хотя бы один из соответствующих битов операндов равен `1`.
Побитовое исключающее ИЛИ (XOR)   | `a ^ b`       | Ставит `1` на бит результата, для которого только один из соответствующих битов операндов равен `1` (но не оба).
Побитовое НЕ (NOT)                | `~a`          | Заменяет каждый бит операнда на противоположный.
Левый сдвиг                       | `a << b`      | Сдвигает двоичное представление `a` на `b` битов влево, добавляя справа нули.
Правый сдвиг, переносящий знак    | `a >> b`      | Сдвигает двоичное представление `a` на `b` битов вправо, отбрасывая сдвигаемые биты.
Правый сдвиг с заполнением нулями | `a >>> b`     | Сдвигает двоичное представление `a` на `b` битов вправо, отбрасывая сдвигаемые биты и добавляя нули слева.




## Условные операторы





## Задание №3: "Порядок срабатывания инкремента"

Посмотрите, понятно ли вам, почему код ниже работает именно так?

```js
var a = 1, b = 1, c, d;

c = ++a; alert(c); // 2
d = b++; alert(d); // 1

c = (2+ ++a); alert(c); // 5
d = (2+ b++); alert(d); // 4

alert(a); // 3
alert(b); // 3
```

<details>
<summary>Решение</summary>

```js
var a = 1, b = 1, c, d;

// префиксная форма сначала увеличивает a до 2, а потом возвращает
c = ++a; alert(c); // 2

// постфиксная форма увеличивает, но возвращает старое значение
d = b++; alert(d); // 1

// сначала увеличили a до 3, потом использовали в арифметике
c = (2+ ++a); alert(c); // 5

// увеличили b до 3, но в этом выражении оставили старое значение
d = (2+ b++); alert(d); // 4

// каждую переменную увеличили по 2 раза
alert(a); // 3
alert(b); // 3
```

</details>

## Задание №4: "Результат присваивания"

Чему будет равен `x` в примере ниже?

```js
var a = 2;
var x = 1 + (a *= 2);
```

<details>
<summary>Решение</summary>

Ответ: `x = 5`.

Оператор присваивания возвращает значение, которое будет записано в переменную, например:

```js
var a = 2;
alert( a *= 2 ); // 4
```

Отсюда `x = 1 + 4 = 5`.

</details>